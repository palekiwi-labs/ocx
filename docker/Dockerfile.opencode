ARG BASE_IMAGE=ocx-base:latest
FROM ${BASE_IMAGE}

ARG OPENCODE_VERSION

USER root

# Download and install OpenCode (x86_64 only)
RUN curl -fsSL "https://github.com/anomalyco/opencode/releases/download/v${OPENCODE_VERSION}/opencode-linux-x64.tar.gz" \
  | tar -xz -C /usr/local/bin/ && \
  chmod +x /usr/local/bin/opencode

USER user

CMD ["opencode"]
